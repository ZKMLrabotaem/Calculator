(()=>{"use strict";var e={208:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(601),r=n.n(o),s=n(314),c=n.n(s)()(r());c.push([e.id,":root {\n  --bg-color: #f5f5f5;\n  --button-color: #ffffff;\n  --button-hover-color: #f0f0f0;\n  --button-text-color: #000000;\n  --display-bg-color: #222222;\n  --display-text-color: #ffffff;\n  --modal-bg-color: #f5f5f5;\n  --modal-text-color: #000000;\n  --modal-button-color: #ffffff;\n  --modal-button-hover-color: #f0f0f0;\n  --modal-button-text-color: #000000;\n  --input-bg-color: #ffffff;\n  --input-text-color: #000000;\n  --select-bg-color: #ffffff;\n  --select-text-color: #000000;\n}\n\nbody {\n  font-family: Arial, sans-serif;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  margin: 0;\n  background-color: var(--bg-color);\n}\n\n#calculator {\n  position: relative;\n  width: 500px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n}\n\n.display {\n  display: flex;\n  height: 130px;\n  align-items: center;\n  justify-content: right;\n  text-align: right;\n  font-size: 3em;\n  padding: 10px;\n  background-color: var(--display-bg-color);\n  color: var(--display-text-color);\n  white-space: nowrap;\n  overflow-x: auto;\n}\n\n.display::-webkit-scrollbar {\n  height: 8px;\n}\n\n.display::-webkit-scrollbar-thumb {\n  background-color: #888;\n  border-radius: 4px;\n}\n\n.display::-webkit-scrollbar-thumb:hover {\n  background-color: #555;\n}\n\n.display::-webkit-scrollbar-track {\n  background-color: #f1f1f1;\n  border-radius: 4px;\n}\n\n.preview-display {\n  position: absolute;\n  right: 15px;\n  top: 115px;\n  display: flex;\n  font-size: 1.6em;\n  color: var(--display-text-color);\n  opacity: 0.6;\n}\n\n.button {\n  font-size: 1.5em;\n  padding: 20px;\n  border: none;\n  background-color: var(--button-color);\n  color: var(--button-text-color);\n  cursor: pointer;\n}\n\n.buttons {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 1px;\n  background: #ccc;\n}\n.settings {\n  position: absolute;\n  text-align: right;\n  font-size: 2.5em;\n  outline: none;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  color: var(--display-text-color);\n}\n.settings:hover {\n  background-color: rgba(0, 0, 0, 0);\n  color: var(--button-hover-color);\n}\n\n.settings:focus-visible {\n  text-shadow: 0 0 4px var(--button-text-color);\n}\nbutton:hover {\n  background-color: var(--button-hover-color);\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal.hidden {\n  display: none;\n}\n\n.modal-content {\n  background: var(--modal-bg-color);\n  color: var(--modal-button-text-color);\n  padding: 20px;\n  border-radius: 10px;\n  width: 300px;\n  text-align: center;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n}\n\nbutton#close-settings {\n  margin-top: 10px;\n  padding: 10px;\n  background: var(--modal-bg-color);\n  color: var(--modal-button-text-color);\n}\n\nbutton#close-settings:hover {\n  background: var(--modal-button-hover-color);\n}\n\nlabel {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 10px;\n  font-size: 1em;\n}\n\ninput,\nselect {\n  margin-top: 5px;\n  border: 1px solid var(--modal-button-color);\n  background-color: var(--input-bg-color);\n  color: var(--input-text-color);\n  border-radius: 5px;\n}\n\nselect {\n  background-color: var(--select-bg-color);\n  color: var(--select-text-color);\n}\n\ninput[type='number'] {\n  background-color: var(--modal-bg-color);\n  text-align: center;\n  width: 40px;\n}\n",""]);const i=c},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var c={};if(o)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(c[a]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);o&&c[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var s={},c=[],i=0;i<e.length;i++){var a=e[i],l=o.base?a[0]+o.base:a[0],u=s[l]||0,d="".concat(l," ").concat(u);s[l]=u+1;var p=n(d),f={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=r(f,o);o.byIndex=i,t.splice(i,0,{identifier:d,updater:h,references:1})}c.push(d)}return c}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=o(e=e||[],r=r||{});return function(e){e=e||[];for(var c=0;c<s.length;c++){var i=n(s[c]);t[i].references--}for(var a=o(e,r),l=0;l<s.length;l++){var u=n(s[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=a}}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={id:o,exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o=n(72),r=n.n(o),s=n(825),c=n.n(s),i=n(659),a=n.n(i),l=n(56),u=n.n(l),d=n(540),p=n.n(d),f=n(113),h=n.n(f),m=n(208),x={};function g(e){if(!this.currentExpression.includes("e")){if(this.resetIfOnlyZero(e),""===this.currentExpression)return this.handleEmptyExpression(e);if(("-"!==this.currentExpression||"-"!==e)&&!this.isInvalidAfterPercent(e))return"."===e?this.handleDot():void(this.isLastCharOperator()?this.handleAfterOperator(e):this.currentExpression+=e)}}function b(){this.currentExpression="0"}function v(){this.currentExpression=this.currentExpression.slice(0,-1),""===this.currentExpression&&(this.currentExpression="0")}function y(){if(this.currentExpression.includes("e"))return;const e=/[^0-9.%]/,t=this.currentExpression.match(/(\d+(\.\d*)?%?)$/);if(!t)return;const n=t[0],o=this.currentExpression.lastIndexOf(n),r=this.currentExpression[o-1]||"",s=this.currentExpression[o-2]||"";""===r?this.currentExpression=this.currentExpression.slice(0,o)+`-${n}`:""===s||e.test(r)&&e.test(s)?this.currentExpression=this.currentExpression.slice(0,o-1)+this.currentExpression.slice(o):(e.test(r),this.currentExpression=this.currentExpression.slice(0,o)+`-${n}`)}function E(){if(this.currentExpression.includes("e"))return;const e=this.currentExpression.match(/\d+(\.\d*)?%?$/);e&&(e[0].includes("%")?this.currentExpression=this.currentExpression.replace(/%$/,""):this.currentExpression+="%")}function k(e,t){let[n,o]=e.toString().split(".");return o?(o=o.slice(0,t),parseFloat(`${n}.${o}`)):e}function w(e,t,n,o,r){const s=o?e/100:e,c=r?n/100:n;switch(t){case"+":return r?s+s*c:s+c;case"-":return r?s-s*c:s-c;case"×":return s*c;case"÷":if(0===c)throw new Error("Деление на ноль");return s/c;default:throw new Error(`Unexpected operator: ${t}`)}}x.styleTagTransform=h(),x.setAttributes=u(),x.insert=a().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=p(),r()(m.A,x),m.A&&m.A.locals&&m.A.locals;const I={"bg-color":"--bg-color","button-color":"--button-color","button-hover-color":"--button-hover-color","button-text-color":"--button-text-color","display-bg-color":"--display-bg-color","display-text-color":"--display-text-color"},S={white:{"--bg-color":"#f5f5f5","--button-color":"#ffffff","--button-hover-color":"#f0f0f0","--button-text-color":"#000000","--display-bg-color":"#222222","--display-text-color":"#ffffff","--modal-bg-color":"#f5f5f5","--modal-text-color":"#000000","--modal-button-color":"#ffffff","--modal-button-hover-color":"#f0f0f0","--modal-button-text-color":"#000000","--input-bg-color":"#ffffff","--input-text-color":"#000000","--select-bg-color":"#ffffff","--select-text-color":"#000000"},dark:{"--bg-color":"#333333","--button-color":"#444444","--button-hover-color":"#555555","--button-text-color":"#ffffff","--display-bg-color":"#000000","--display-text-color":"#ffffff","--modal-bg-color":"#333333","--modal-text-color":"#f5f5f5","--modal-button-color":"#333333","--modal-button-hover-color":"#555555","--modal-button-text-color":"#ffffff","--input-bg-color":"#444444","--input-text-color":"#ffffff","--select-bg-color":"#444444","--select-text-color":"#ffffff"}},C=()=>{const e=document.getElementById("theme").value;var t;document.body.classList.remove("white-theme","dark-theme"),document.body.classList.add("white"===e?"white-theme":"dark-theme"),t=S[e],Object.keys(t).forEach((e=>{document.documentElement.style.setProperty(e,t[e])})),Object.keys(I).forEach((e=>{const n=document.getElementById(e);n&&(n.value=t[I[e]]??n.value)}))},P=()=>{Object.keys(I).forEach((e=>{const t=document.getElementById(e),n=I[e];t&&document.documentElement.style.setProperty(n,t.value)}))},O=()=>{const e=parseInt(document.getElementById("decimal-places").value,10),t=document.getElementById("use-exponential").checked;localStorage.setItem("calculatorSettings",JSON.stringify({decimalPlaces:e,useExponential:t})),localStorage.setItem("calculatorTheme",document.getElementById("theme").value);const n={};Object.keys(I).forEach((e=>{const t=document.getElementById(e);t&&(n[e]=t.value)})),localStorage.setItem("calculatorColors",JSON.stringify(n))},L=new class{constructor(){this.currentExpression="0",this.decimalPlaces=3,this.useExponential=!1,this.append=g.bind(this),this.clear=b.bind(this),this.deleteLastChar=v.bind(this),this.toggleSign=y.bind(this),this.percent=E.bind(this)}setSettings({decimalPlaces:e,useExponential:t}){this.decimalPlaces=e,this.useExponential=t}resetIfOnlyZero(e){"0"!==this.currentExpression&&"-0"!==this.currentExpression||[".","+","×","÷"].includes(e)||(this.currentExpression="")}handleEmptyExpression(e){"-"!==e&&isNaN(e)||(this.currentExpression+=e)}isInvalidAfterPercent(e){return"%"===this.currentExpression.slice(-1)&&!["+","-","×","÷"].includes(e)}handleDot(){const e=this.currentExpression.slice(-1);if(isNaN(e))return void(this.currentExpression=this.currentExpression.slice(0,-1));const t=this.currentExpression.match(/\d+(\.\d*)?$/);t&&t[0].includes(".")||(this.currentExpression+=".")}isLastCharOperator(){const e=this.currentExpression.slice(-1);return["+","-","×","÷"].includes(e)}handleAfterOperator(e){const t=this.currentExpression.slice(-2,-1);if("-"===e){if(["-","×","÷","+"].includes(t))return;this.currentExpression+=e}else{if(["+","×","÷"].includes(e))return;this.currentExpression+=e}}round(e){return k(e,this.decimalPlaces)}toExponentialFormat(e){return function(e,t){if(0===e)return"0";const n=e<0;let o=function(e){return e<0?-e:e}(e),r=0;for(;o>=10;)o/=10,r++;for(;o<1&&o>0;)o*=10,r--;o=k(o,t);let s=o.toString();if(s.includes(".")){const e=s.indexOf(".");s=s.slice(0,e+t+1),s=s.replace(/\.?0+$/,"")}return s.endsWith(".")&&(s=s.slice(0,-1)),s+="e"+(r>=0?"+":"")+r,n&&(s="-"+s),s}(e,this.decimalPlaces)}tokenize(e){return function(e){const t=[{regex:/(-?\d+(\.\d*)?)%\s*([+\-×÷])\s*(-?\d+(\.\d*)?)%/,leftPercent:!0,rightPercent:!0},{regex:/(-?\d+(\.\d*)?)\s*([+\-×÷])\s*(-?\d+(\.\d*)?)%/,leftPercent:!1,rightPercent:!0},{regex:/(-?\d+(\.\d*)?)%\s*([+\-×÷])\s*(-?\d+(\.\d*)?)/,leftPercent:!0,rightPercent:!1}];for(const{regex:n,leftPercent:o,rightPercent:r}of t){let t;for(;t=n.exec(e);){const n=w(parseFloat(t[1]),t[3],parseFloat(t[4]),o,r);e=e.replace(t[0],n)}}const n=[];let o="",r=!0;for(let t of e)isNaN(t)&&"."!==t?"-"===t&&r?o+=t:(o&&(n.push(parseFloat(o)),o=""),["+","-","×","÷"].includes(t)&&n.push(t),r="-"===t||["+","-","×","÷"].includes(t)):(o+=t,r=!1);return o&&n.push(parseFloat(o)),n.length&&["+","-","×","÷"].includes(n[n.length-1])&&n.pop(),n}(e)}evaluate(e){return function(e){const t=[];for(let n=0;n<e.length;n++)if("×"===e[n]||"÷"===e[n]){const o=t.pop(),r=e[++n],s="×"===e[n-1]?o*r:0===r?(()=>{throw new Error("Деление на ноль")})():o/r;t.push(s)}else t.push(e[n]);let n=t[0];for(let e=1;e<t.length;e+=2){const o=t[e],r=t[e+1];n="+"===o?n+r:n-r}return n}(e)}calculate({forPreview:e=!1}={}){let t;try{const n=this.tokenize(this.currentExpression);t=this.evaluate(n),t=this.useExponential&&(t>=1e10||t<=-1e10||0!==t&&t<1e-10&&t>-1e-10)?this.toExponentialFormat(t):this.round(t),e||(this.currentExpression=t.toString())}catch{e?t=null:this.currentExpression="Error"}return t}},N=document.querySelector(".display"),B=document.querySelector(".preview-display");((e,t,n)=>{const o=()=>{t.textContent=e.currentExpression},r=document.getElementById("decimal-places"),s=document.getElementById("use-exponential"),c=()=>{const t=parseInt(r.value,10),n=s.checked;e.setSettings({decimalPlaces:t,useExponential:n})};r.addEventListener("input",c),s.addEventListener("change",c),c();const i=document.querySelector(".buttons");let a;i.addEventListener("mousedown",(t=>{"BUTTON"===t.target.tagName&&"⌫"===t.target.textContent&&(a=setTimeout((()=>{e.clear(),n.textContent="",o()}),300))})),i.addEventListener("mouseup",(t=>{if("BUTTON"!==t.target.tagName)return;const r=t.target.textContent;switch(clearTimeout(a),r){case"⌫":e.deleteLastChar(),n.textContent=e.currentExpression;break;case"C":e.clear(),n.textContent="";break;case"+/-":e.toggleSign(),n.textContent=e.calculate({forPreview:!0});break;case"%":e.percent(),n.textContent=e.calculate({forPreview:!0});break;case"=":e.calculate(),n.textContent="";break;default:if(!isNaN(r)||["+","-","×","÷","."].includes(r)){e.append(r);const t=e.calculate({forPreview:!0});n.textContent=t??""}}o()})),document.addEventListener("keydown",(t=>{const r=t.key;isNaN(r)?["+","-","*","/","."].includes(r)?e.append({"*":"×","/":"÷"}[r]||r):"Enter"===r||"="===r?(e.calculate(),n.textContent=""):"Backspace"===r?(e.deleteLastChar(),n.textContent=e.currentExpression):"%"===r?e.percent():"Escape"===r&&(e.clear(),n.textContent=""):(e.append(r),n.textContent=e.calculate({forPreview:!0})??""),o()}));const l=document.getElementById("settings-modal"),u=document.querySelector("button:first-child"),d=document.getElementById("close-settings");u.addEventListener("click",(()=>l.classList.remove("hidden"))),d.addEventListener("click",(()=>l.classList.add("hidden"))),o()})(L,N,B),window.addEventListener("load",(()=>{(e=>{const t=JSON.parse(localStorage.getItem("calculatorSettings"));t&&(document.getElementById("decimal-places").value=t.decimalPlaces,document.getElementById("use-exponential").checked=t.useExponential,e.setSettings(t));const n=localStorage.getItem("calculatorTheme");n&&(document.getElementById("theme").value=n,C());const o=JSON.parse(localStorage.getItem("calculatorColors"));o&&(Object.keys(o).forEach((e=>{const t=document.getElementById(e);t&&(t.value=o[e])})),P())})(L)})),["decimal-places","use-exponential","theme"].forEach((e=>{const t=document.getElementById(e);t&&t.addEventListener("checkbox"===t.type?"change":"input",(()=>{"theme"===e&&(C(),P()),O()}))})),Object.keys(I).forEach((e=>{const t=document.getElementById(e);t&&t.addEventListener("input",(()=>{P(),O()}))}))})();